<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./styles.css">
    <!-- GLIDER https://codepen.io/chaukar/pen/mdyZjoL -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Glide.js/3.2.0/glide.min.js" integrity="sha512-IkLiryZhI6G4pnA3bBZzYCT9Ewk87U4DGEOz+TnRD3MrKqaUitt+ssHgn2X/sxoM7FxCP/ROUp6wcxjH/GcI5Q==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <title>Interactive GLB Model</title>
</head>
<body>

    <section id="section1" class="section bgw">
        <h1 style=" max-width: 80vw;">The <p id="float" class="g">Lightweight</p> and <p id="fall" class="g">Quick</p> solution.</h1>
        <p style="max-width: 25vw;">Looking for a <b>faster</b>, <b>lighter</b>, and more <b>sustainable</b> way to build? Look no further than Light Steel Framing (LSF). Contact us and discover how LSF can <b>transform your next project.</b></p>
        <span class="cta" id="landingCTA">Build with LSF</span>
    </section>

    <section id="section2" class="section bgg">

        <h1>Experience the Future: Building with Light Steel Framing</h1>

        <div class="glide">
            <div class="glide__track"  data-glide-el="track" style="display: none !important;">
              <ul class="glide__slides">
                <li class="glide__slide">
                </li>
                <li class="glide__slide">
                </li>
                <li class="glide__slide">
                </li>
              </ul>
            </div>
            <div class="glide__bullets" data-glide-el="controls[nav]">
              <button class="glide__bullet" data-glide-dir="=0" id="Walls">Murs</button>
              <button class="glide__bullet" data-glide-dir="=1" id="Roofs">Planchers</button>
              <button class="glide__bullet" data-glide-dir="=2" id="All">Structure Finale</button>
            </div>
        </div>
      </section>
      
      <section id="section3" class="section bgw">
        <h1>Built Faster, Built Smarter: Why Choose LSF?</h1>
        <p>
          LSF offers a multitude of advantages over traditional construction methods. Enjoy significantly faster construction times, allowing you to move into your dream space sooner. LSF buildings are incredibly strong and durable, resisting harsh weather conditions and standing the test of time. Additionally, LSF utilizes eco-friendly materials and reduces construction waste, making it a responsible choice for the planet.
        </p>
      </section>
      
      <section id="section4" class="section bgg">
        <h1>Strength You Can Trust, Sustainability You Can Embrace</h1>
        <p>
          The lightweight nature of LSF shouldn't diminish its remarkable strength and stability. Steel frames exceed building code requirements. LSF construction also boasts superior energy efficiency, leading to lower utility bills and a reduced carbon footprint. With LSF, you get the best of both worlds: a strong, secure building for generations to come, built with a focus on environmental responsibility.
        </p>
      </section>
      
      <section id="section5" class="section bgw">
        <h1>Dream It. Build It. Faster with LSF</h1>
        <p style="max-width: 33vw !important;">
          LSF isn't just about speed and efficiency; it's about unlocking your design potential. LSF's flexibility allows for a wide range of architectural styles and layouts, making it perfect for any vision you may have. Whether you dream of a modern masterpiece or a cozy cottage, LSF can help you bring it to life, faster than ever before.
        </p>
      </section>
      <section id="section6" class="section bgb">
        <h1>Sustainable Building Practices</h1>
        <p style="max-width: 33vw !important;">
          Sustainability is at the heart of LSF construction. Using recyclable materials and efficient building processes, LSF minimizes the environmental impact of your projects, helping you build a greener future.
        </p>
    </section>
    <section id="section7" class="section bgw">
        <h1>Cost-Effective Solutions</h1>
        <p style="max-width: 33vw !important;">
          LSF offers cost-effective solutions for all types of construction projects. By reducing labor costs and material waste, LSF helps you stay within budget without compromising on quality or design.
        </p>
    </section>
    <section id="section8" class="section bgb">
        <h1>Innovative Construction Techniques</h1>
        <p style="max-width: 33vw !important;">
          Stay ahead of the curve with innovative LSF construction techniques. Our advanced methodologies streamline the building process, ensuring that your projects are completed faster and with superior quality.
        </p>
    </section>
    <section id="section9" class="section bgw">
        <h1>Architectural Flexibility</h1>
        <p style="max-width: 33vw !important;">
          Flexibility is key in modern construction, and LSF delivers. Our system allows for easy modifications and expansions, ensuring that your structures can evolve with your needs over time.
        </p>
    </section>
    <section id="section10" class="section bgb">
        <h1>Enhanced Safety Features</h1>
        <p style="max-width: 33vw !important;">
          Safety is paramount in any construction project. LSF systems incorporate enhanced safety features to protect both builders and occupants, providing peace of mind throughout the construction process and beyond.
        </p>
    </section>
    <section id="section11" class="section bgw">
        <h1>Reduced Construction Time</h1>
        <p style="max-width: 33vw !important;">
          Speed up your construction timelines with LSF. Our streamlined processes and pre-engineered components significantly reduce the time needed to complete your projects, allowing you to move from concept to completion faster than ever.
        </p>
    </section>
    <section id="section12" class="section bgb">
        <h1>Quality You Can Trust</h1>
        <p style="max-width: 33vw !important;">
          Trust in the quality and reliability of LSF for your construction needs. Our systems are designed to meet the highest standards, ensuring that your projects are built to last with exceptional strength and durability.
        </p>
    </section>

    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.150.1/build/three.module.js",
                "GLTFLoader": "https://unpkg.com/three@0.150.1/examples/jsm/loaders/GLTFLoader.js",
                "OrbitControls": "https://unpkg.com/three@0.150.1/examples/jsm/controls/OrbitControls.js",
                "TWEEN": "https://unpkg.com/@tweenjs/tween.js@18.6.4/dist/tween.esm.js"
            }
        }
    </script>

    <script type="module">
        import * as THREE from 'three';
        import { GLTFLoader } from 'GLTFLoader';
        import { OrbitControls } from 'OrbitControls';
        import { Tween, Easing, update } from 'TWEEN';


        const base = { x: 0, y: 5, z: 14 };

        // Scene
        const scene = new THREE.Scene();

        // Camera
        const camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);
        // camera.position.set(0, 0, 100);
        camera.position.set(base.x, base.y, base.z);


        camera.lookAt(new THREE.Vector3(0, 0, 0));

        // Renderer
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setClearColor(0xffffff, 0); // Set background color to white
        document.body.appendChild(renderer.domElement);

        // Lights
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
        scene.add(ambientLight); // Add ambient light permanently

        const pointLight = new THREE.PointLight(0xffffff, 1, 100);
        pointLight.position.set(10, 10, 10);
        scene.add(pointLight); // Add point light permanently

        // Orbit Controls
        const controls = new OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true; // Enable damping (inertia)
        controls.dampingFactor = 0.25; // Damping inertia factor
        controls.screenSpacePanning = false; // Do not allow panning
        controls.minDistance = 5; // Set minimum zoom distance
        controls.maxDistance = 50; // Set maximum zoom distance
        controls.maxPolarAngle = Math.PI / 2; // Limit the vertical rotation
        controls.enableZoom = false; // Disable zooming by scroll

        // GLTF Loader
        let model;
        let exploded = false;

        const loader = new GLTFLoader();
        loader.load('0258.glb', function (gltf) {
            model = gltf.scene;
            scene.add(model);
 
            model.traverse((child) => {
              
                if (child.isMesh) {
                    child.material.transparent = true; // Ensure transparency support
                    child.material.opacity = 1; // Set initial opacity to 1
                    child.userData.originalPosition = child.position.clone();
                    child.material = child.material.clone();

                    const direction = new THREE.Vector3().copy(child.position).normalize();
                    child.userData.explodedPosition = child.position.clone().add(direction.multiplyScalar(4));
                }
            });


            console.log('Model loaded:', model);
        }, undefined, function (error) {
            console.error(error);
        });

        // Function to toggle explode
        function toggleExplode(reverse = false) {
            if (!model) return;

            model.traverse((child) => {
                if (child.isMesh) {// && child.isGroup
                    if (child.userData.originalPosition && child.userData.explodedPosition) {
                        const startPosition = { x: child.position.x, y: child.position.y, z: child.position.z };
                        const targetPosition = reverse ? child.userData.originalPosition : child.userData.explodedPosition;

                        new Tween(startPosition)
                            .to({ x: targetPosition.x, y: targetPosition.y, z: targetPosition.z }, 1000)
                            .easing(Easing.Exponential.InOut)
                            .onUpdate(() => {
                                child.position.set(startPosition.x, startPosition.y, startPosition.z);
                            })
                            .start();
                    } else {
                        console.warn('Missing userData properties for:', child);
                    }
                }
            });
            exploded = !exploded;
        }

        let spinModel = false;
        let previousScrollY = 0;
        let currentStep = 0;

        function resetSpin() {
            new Tween(model.rotation)
                .to({ y: 0 }, 1000)
                .easing(Easing.Cubic.InOut)
                .start();
        }
        const glider = new Glide(".glide", {
            type: "carousel",
            autoplay: 5000,
            hoverpause: false,
            gap: 0
        })


        let groups = {'IfcElementAssembly1F-4': ['IfcBeam150S-51-16-1001', 'IfcBeam150S-51-16-1002', 'IfcBeam150S-51-16-1003', 'IfcBeam150S-51-16-1007', 'IfcBeam150S-51-16-1009', 'IfcBeam150S-51-16-1010', 'IfcBeam150S-51-16-1012'], 'IfcElementAssembly1F-5': ['IfcBeam150S-51-16-15', 'IfcBeam150S-51-16-1004', 'IfcBeam150S-51-16-1006', 'IfcBeam150S-51-16-1008', 'IfcBeam150S-51-16-1011'], 'IfcElementAssemblyG-W13': ['IfcColumn89S-51-16-1069', 'IfcColumn89S-51-16-1070', 'IfcColumn89S-51-16-1071', 'IfcBeam89S-51-16-1038', 'IfcColumn89S-51-16-1072', 'IfcBeam89S-51-16-1039', 'IfcBeam89S-51-16-1040'], 'IfcElementAssemblyG-W12': ['IfcColumn89S-51-16-1073', 'IfcColumn89S-51-16-1074', 'IfcColumn89S-51-16-1075', 'IfcColumn89S-51-16-1076', 'IfcColumn89S-51-16-1077', 'IfcColumn89S-51-16-1078', 'IfcBeam89S-51-16-1041', 'IfcBeam89S-51-16-1043', 'IfcBeam89S-51-16-1045'], 'IfcElementAssemblyG-W2': ['IfcColumn89S-51-16-1079', 'IfcBeam89S-51-16-1042', 'IfcBeam89S-51-16-1044', 'IfcColumn89S-51-16-1080', 'IfcColumn89S-51-16-1081', 'IfcColumn89S-51-16-1082', 'IfcColumn89S-51-16-1083', 'IfcColumn89S-51-16-1084', 'IfcColumn89S-51-16-1086', 'IfcBeam89S-51-16-1048', 'IfcBeam89S-51-16-1050', 'IfcBeam89S-51-16-1051'], 'IfcElementAssemblyG-W10': ['IfcColumn89S-51-16-1085', 'IfcBeam89S-51-16-1046', 'IfcBeam89S-51-16-1047', 'IfcColumn89S-51-16-1087', 'IfcColumn89S-51-16-1088', 'IfcBeam89S-51-16-1049', 'IfcColumn89S-51-16-1089', 'IfcColumn89S-51-16-1090', 'IfcColumn89S-51-16-1091', 'IfcBeam89S-51-16-1053', 'IfcBeam89S-51-16-1054'], 'IfcElementAssemblyG-W9': ['IfcColumn89S-51-16-1092', 'IfcBeam89S-51-16-1052', 'IfcColumn89S-51-16-1093', 'IfcColumn89S-51-16-1094', 'IfcColumn89S-51-16-1095', 'IfcBeam89S-51-16-1055', 'IfcColumn89S-51-16-1096', 'IfcBeam89S-51-16-1057', 'IfcColumn89S-51-16-1097', 'IfcColumn89S-51-16-1098', 'IfcBeam89S-51-16-1058', 'IfcColumn89S-51-16-1099', 'IfcBeam89S-51-16-1059', 'IfcBeam89S-51-16-1061', 'IfcBeam89S-51-16-1064'], 'IfcElementAssemblyG-W11': ['IfcBeam89S-51-16-1056', 'IfcColumn89S-51-16-1100', 'IfcColumn89S-51-16-1101', 'IfcColumn89S-51-16-1102', 'IfcColumn89S-51-16-1103', 'IfcBeam89S-51-16-1060', 'IfcColumn89S-51-16-1104', 'IfcColumn89S-51-16-1105', 'IfcColumn89S-51-16-1106', 'IfcColumn89S-51-16-1107', 'IfcBeam89S-51-16-1062', 'IfcColumn89S-51-16-1108', 'IfcBeam89S-51-16-1063', 'IfcBeam89S-51-16-1065', 'IfcBeam89S-51-16-1068'], 'IfcElementAssemblyG-W3': ['IfcColumn89S-51-16-1109', 'IfcColumn89S-51-16-1110', 'IfcColumn89S-51-16-1111', 'IfcColumn89S-51-16-1112', 'IfcColumn89S-51-16-1113', 'IfcColumn89S-51-16-1114', 'IfcBeam89S-51-16-1067', 'IfcColumn89S-51-16-1115', 'IfcColumn89S-51-16-1116', 'IfcColumn89S-51-16-1117', 'IfcBeam89S-51-16-1070', 'IfcBeam89S-51-16-1072', 'IfcBeam89S-51-16-1073'], 'IfcElementAssemblyG-W4': ['IfcBeam89S-51-16-1066', 'IfcColumn89S-51-16-1118', 'IfcBeam89S-51-16-1069', 'IfcColumn89S-51-16-1119', 'IfcBeam89S-51-16-1071', 'IfcColumn89S-51-16-1120', 'IfcColumn89S-51-16-1121', 'IfcColumn89S-51-16-1122', 'IfcColumn89S-51-16-1123', 'IfcColumn89S-51-16-1124', 'IfcColumn89S-51-16-1125', 'IfcColumn89S-51-16-1126', 'IfcColumn89S-51-16-1127', 'IfcColumn89S-51-16-1128', 'IfcBeam89S-51-16-1076', 'IfcBeam89S-51-16-1078', 'IfcBeam89S-51-16-1080'], 'IfcElementAssemblyG-W1': ['IfcBeam89S-51-16-1074', 'IfcBeam89S-51-16-1075', 'IfcColumn89S-51-16-1129', 'IfcColumn89S-51-16-1130', 'IfcColumn89S-51-16-1131', 'IfcColumn89S-51-16-1132', 'IfcColumn89S-51-16-1133', 'IfcBeam89S-51-16-1077', 'IfcBeam89S-51-16-1079', 'IfcColumn89S-51-16-1134', 'IfcColumn89S-51-16-1135', 'IfcColumn89S-51-16-1136', 'IfcColumn89S-51-16-1137', 'IfcBeam89S-51-16-1081', 'IfcBeam89S-51-16-1083', 'IfcBeam89S-51-16-1085', 'IfcColumn89S-51-16-1142', 'IfcBeam89S-51-16-1087', 'IfcColumn89S-51-16-1147'], 'IfcElementAssemblyG-W6': ['IfcBeam89S-51-16-1082', 'IfcColumn89S-51-16-1138', 'IfcBeam89S-51-16-1084', 'IfcColumn89S-51-16-1139', 'IfcColumn89S-51-16-1140', 'IfcColumn89S-51-16-1141', 'IfcColumn89S-51-16-1143', 'IfcBeam89S-51-16-1086', 'IfcColumn89S-51-16-1144', 'IfcColumn89S-51-16-1145', 'IfcBeam89S-51-16-1088', 'IfcBeam89S-51-16-1089', 'IfcColumn89S-51-16-1146', 'IfcBeam89S-51-16-1091'], 'IfcElementAssemblyG-W5': ['IfcColumn89S-51-16-1148', 'IfcBeam89S-51-16-1090', 'IfcColumn89S-51-16-1149', 'IfcBeam89S-51-16-1092', 'IfcColumn89S-51-16-1150', 'IfcColumn89S-51-16-1151', 'IfcColumn89S-51-16-1152', 'IfcColumn89S-51-16-1153', 'IfcColumn89S-51-16-1154', 'IfcColumn89S-51-16-1155', 'IfcBeam89S-51-16-1093', 'IfcColumn89S-51-16-1156', 'IfcBeam89S-51-16-1094', 'IfcColumn89S-51-16-1157', 'IfcBeam89S-51-16-1095', 'IfcColumn89S-51-16-1158', 'IfcBeam89S-51-16-1096', 'IfcBeam89S-51-16-1099'], 'IfcElementAssemblyG-W7': ['IfcColumn89S-51-16-1159', 'IfcColumn89S-51-16-1160', 'IfcColumn89S-51-16-1161', 'IfcColumn89S-51-16-1162', 'IfcColumn89S-51-16-1163', 'IfcColumn89S-51-16-1164', 'IfcBeam89S-51-16-1097', 'IfcBeam89S-51-16-1098', 'IfcColumn89S-51-16-1165', 'IfcBeam89S-51-16-1100'], 'IfcElementAssemblyG-W8': ['IfcColumn89S-51-16-1166', 'IfcColumn89S-51-16-1167', 'IfcColumn89S-51-16-1168', 'IfcBeam89S-51-16-1101', 'IfcColumn89S-51-16-1169', 'IfcColumn89S-51-16-1170', 'IfcBeam89S-51-16-1102', 'IfcColumn89S-51-16-1171', 'IfcBeam89S-51-16-1103', 'IfcColumn89S-51-16-1172', 'IfcColumn89S-51-16-1173', 'IfcColumn89S-51-16-1174', 'IfcBeam89S-51-16-1104', 'IfcColumn89S-51-16-1175', 'IfcBeam89S-51-16-1105'], 'IfcElementAssembly1F-2': ['IfcBeam150S-51-16-1054', 'IfcBeam150S-51-16-1057', 'IfcBeam150S-51-16-1058', 'IfcBeam150S-51-16-1059', 'IfcBeam150S-51-16-1060', 'IfcBeam150S-51-16-1063', 'IfcBeam150S-51-16-1064', 'IfcBeam150S-51-16-1067', 'IfcBeam150S-51-16-1074'], 'IfcElementAssembly1F-3': ['IfcBeam150S-51-16-1061', 'IfcBeam150S-51-16-1065', 'IfcBeam150S-51-16-1066', 'IfcBeam150S-51-16-1068', 'IfcBeam150S-51-16-1070', 'IfcBeam150S-51-16-1071', 'IfcBeam150S-51-16-1075'], 'IfcElementAssembly1F-1': ['IfcBeam150S-51-16-1069', 'IfcBeam150S-51-16-1072', 'IfcBeam150S-51-16-1073', 'IfcBeam150S-51-16-1078', 'IfcBeam150S-51-16-1081', 'IfcBeam150S-51-16-1082', 'IfcBeam150S-51-16-1086'], 'IfcElementAssemblyR1': ['IfcBeam150S-51-16-1076', 'IfcBeam150S-51-16-1077', 'IfcBeam150S-51-16-1079', 'IfcBeam150S-51-16-1080', 'IfcBeam150S-51-16-1083', 'IfcBeam150S-51-16-1084', 'IfcBeam150S-51-16-1085', 'IfcBeam150S-51-16-1087', 'IfcBeam150S-51-16-1088', 'IfcBeam150S-51-16-1089', 'IfcBeam150S-51-16-1110'], 'IfcElementAssemblyR2': ['IfcBeam150S-51-16-1090', 'IfcBeam150S-51-16-1091', 'IfcBeam150S-51-16-1092', 'IfcBeam150S-51-16-1093', 'IfcBeam150S-51-16-1094', 'IfcBeam150S-51-16-1096', 'IfcBeam150S-51-16-1097', 'IfcBeam150S-51-16-1098', 'IfcBeam150S-51-16-1100', 'IfcBeam150S-51-16-1108', 'IfcBeam150S-51-16-1109'], 'IfcElementAssemblyR3': ['IfcBeam150S-51-16-1095', 'IfcBeam150S-51-16-1099', 'IfcBeam150S-51-16-1101', 'IfcBeam150S-51-16-1102', 'IfcBeam150S-51-16-1103', 'IfcBeam150S-51-16-1104', 'IfcBeam150S-51-16-1105', 'IfcBeam150S-51-16-1106', 'IfcBeam150S-51-16-1107'], 'IfcElementAssembly1F-W5': ['IfcColumn89S-51-16-12', 'IfcColumn89S-51-16-1001', 'IfcColumn89S-51-16-1003', 'IfcColumn89S-51-16-1004', 'IfcColumn89S-51-16-1005', 'IfcColumn89S-51-16-1006', 'IfcColumn89S-51-16-1007', 'IfcBeam89S-51-16-12', 'IfcColumn89S-51-16-1008', 'IfcBeam89S-51-16-1001', 'IfcBeam89S-51-16-1003', 'IfcBeam89S-51-16-1004'], 'IfcElementAssembly1F-W4': ['IfcColumn89S-51-16-1009', 'IfcColumn89S-51-16-1010', 'IfcColumn89S-51-16-1011', 'IfcColumn89S-51-16-1012', 'IfcColumn89S-51-16-1013', 'IfcColumn89S-51-16-1014', 'IfcColumn89S-51-16-1015', 'IfcColumn89S-51-16-1018', 'IfcBeam89S-51-16-1005', 'IfcBeam89S-51-16-1008', 'IfcBeam89S-51-16-1011', 'IfcBeam89S-51-16-1012'], 'IfcElementAssembly1F-W1': ['IfcColumn89S-51-16-1016', 'IfcColumn89S-51-16-1017', 'IfcBeam89S-51-16-1006', 'IfcBeam89S-51-16-1007', 'IfcColumn89S-51-16-1019', 'IfcColumn89S-51-16-1020', 'IfcColumn89S-51-16-1021', 'IfcBeam89S-51-16-1009', 'IfcColumn89S-51-16-1022', 'IfcColumn89S-51-16-1023', 'IfcBeam89S-51-16-1010', 'IfcColumn89S-51-16-1024', 'IfcColumn89S-51-16-1025', 'IfcBeam89S-51-16-1013', 'IfcColumn89S-51-16-1026', 'IfcColumn89S-51-16-1027', 'IfcBeam89S-51-16-1014', 'IfcBeam89S-51-16-1015', 'IfcColumn89S-51-16-1030', 'IfcBeam89S-51-16-1018', 'IfcBeam89S-51-16-1020'], 'IfcElementAssembly1F-W2': ['IfcBeam89S-51-16-1016', 'IfcColumn89S-51-16-1028', 'IfcBeam89S-51-16-1017', 'IfcColumn89S-51-16-1029', 'IfcColumn89S-51-16-1031', 'IfcBeam89S-51-16-1019', 'IfcColumn89S-51-16-1032', 'IfcColumn89S-51-16-1033', 'IfcColumn89S-51-16-1034', 'IfcColumn89S-51-16-1035', 'IfcColumn89S-51-16-1036', 'IfcColumn89S-51-16-1037', 'IfcColumn89S-51-16-1038', 'IfcColumn89S-51-16-1039', 'IfcBeam89S-51-16-1021', 'IfcBeam89S-51-16-1022', 'IfcBeam89S-51-16-1023', 'IfcBeam89S-51-16-1027'], 'IfcElementAssembly1F-W7': ['IfcColumn89S-51-16-1040', 'IfcColumn89S-51-16-1041', 'IfcColumn89S-51-16-1042', 'IfcColumn89S-51-16-1043', 'IfcColumn89S-51-16-1045', 'IfcColumn89S-51-16-1046', 'IfcBeam89S-51-16-1024', 'IfcBeam89S-51-16-1025', 'IfcBeam89S-51-16-1026'], 'IfcElementAssembly1F-W3': ['IfcColumn89S-51-16-1044', 'IfcColumn89S-51-16-1047', 'IfcColumn89S-51-16-1048', 'IfcColumn89S-51-16-1049', 'IfcColumn89S-51-16-1050', 'IfcColumn89S-51-16-1051', 'IfcColumn89S-51-16-1052', 'IfcColumn89S-51-16-1053', 'IfcColumn89S-51-16-1055', 'IfcBeam89S-51-16-1028', 'IfcBeam89S-51-16-1031', 'IfcBeam89S-51-16-1033'], 'IfcElementAssembly1F-W6': ['IfcColumn89S-51-16-1054', 'IfcColumn89S-51-16-1056', 'IfcColumn89S-51-16-1057', 'IfcColumn89S-51-16-1058', 'IfcColumn89S-51-16-1059', 'IfcColumn89S-51-16-1060', 'IfcColumn89S-51-16-1061', 'IfcColumn89S-51-16-1063', 'IfcBeam89S-51-16-1029', 'IfcBeam89S-51-16-1036', 'IfcBeam89S-51-16-1037'], 'IfcElementAssembly1F-W8': ['IfcColumn89S-51-16-1062', 'IfcColumn89S-51-16-1064', 'IfcColumn89S-51-16-1065', 'IfcColumn89S-51-16-1066', 'IfcBeam89S-51-16-1030', 'IfcBeam89S-51-16-1032', 'IfcBeam89S-51-16-1034', 'IfcBeam89S-51-16-1035', 'IfcColumn89S-51-16-1067', 'IfcColumn89S-51-16-1068'], 'IfcElementAssemblyR7': ['IfcBeam150S-51-16-1013', 'IfcBeam150S-51-16-1014', 'IfcBeam150S-51-16-1015', 'IfcBeam150S-51-16-1017', 'IfcBeam150S-51-16-1018', 'IfcBeam150S-51-16-1020', 'IfcBeam150S-51-16-1021', 'IfcBeam150S-51-16-1023', 'IfcBeam150S-51-16-1025', 'IfcBeam150S-51-16-1026', 'IfcBeam150S-51-16-1035'], 'IfcElementAssemblyR6': ['IfcBeam150S-51-16-1016', 'IfcBeam150S-51-16-1019', 'IfcBeam150S-51-16-1022', 'IfcBeam150S-51-16-1024', 'IfcBeam150S-51-16-1027', 'IfcBeam150S-51-16-1030', 'IfcBeam150S-51-16-1044'], 'IfcElementAssemblyR5': ['IfcBeam150S-51-16-1028', 'IfcBeam150S-51-16-1029', 'IfcBeam150S-51-16-1031', 'IfcBeam150S-51-16-1033', 'IfcBeam150S-51-16-1034', 'IfcBeam150S-51-16-1036', 'IfcBeam150S-51-16-1037', 'IfcBeam150S-51-16-1038', 'IfcBeam150S-51-16-1041', 'IfcBeam150S-51-16-1055'], 'IfcElementAssemblyR8': ['IfcBeam150S-51-16-1032', 'IfcBeam150S-51-16-1039', 'IfcBeam150S-51-16-1040', 'IfcBeam150S-51-16-1042', 'IfcBeam150S-51-16-1043', 'IfcBeam150S-51-16-1047', 'IfcBeam150S-51-16-1048'], 'IfcElementAssemblyR4': ['IfcBeam150S-51-16-1045', 'IfcBeam150S-51-16-1046', 'IfcBeam150S-51-16-1049', 'IfcBeam150S-51-16-1050', 'IfcBeam150S-51-16-1051', 'IfcBeam150S-51-16-1052', 'IfcBeam150S-51-16-1053', 'IfcBeam150S-51-16-1056', 'IfcBeam150S-51-16-1062']}


        window.addEventListener('scroll', () => {
            const height_07 = window.innerHeight * 0.7;

            const scrollY = window.scrollY;
            const steps = Array.from({ length: 12 }, (_, i) => (i === 0 ? height_07 : i * window.innerHeight + height_07));
            steps.unshift(0);
            if (scrollY > steps[11] && currentStep !== 12) {

                currentStep = 12;
            }
            if (scrollY > steps[10] && scrollY <= steps[11] && currentStep !== 11) {

                currentStep = 11;
            }
            if (scrollY > steps[9] && scrollY <= steps[10] && currentStep !== 10) {

                currentStep = 10;
            }
            // Add additional steps similarly
            if (scrollY > steps[8] && scrollY <= steps[9] && currentStep !== 9) {
                // Your specific actions for step 9
                currentStep = 9;
            }
            if (scrollY > steps[7] && scrollY <= steps[8] && currentStep !== 8) {
                // Your specific actions for step 8
                currentStep = 8;
            }
            if (scrollY > steps[6] && scrollY <= steps[7] && currentStep !== 7) {
                // Your specific actions for step 7
                currentStep = 7;
            }
            if (scrollY > steps[5] && scrollY <= steps[6] && currentStep !== 6) {
                // Your specific actions for step 6
                currentStep = 6;
            }
            if (scrollY > steps[4] && scrollY <= steps[5] && currentStep !== 5) {
                toggleExplode(true);
                new Tween(camera.position)
                    .to(base, 1000)
                    .easing(Easing.Cubic.InOut)
                    .start();
                spinModel = true;
                currentStep = 5;
            }
            if (scrollY > steps[3] && scrollY <= steps[4] && currentStep !== 4) {
                toggleExplode(true);
                new Tween(camera.position)
                    .to({ x: 0, y: 5, z: 5 }, 1000)
                    .easing(Easing.Cubic.InOut)
                    .start();
                resetSpin();
                spinModel = false;
                currentStep = 4;
            }
            if (scrollY > steps[2] && scrollY <= steps[3] && currentStep !== 3) {
                showAllGroups();
                toggleExplode(false);
                new Tween(camera.position)
                    .to({ x: 0, y: 10, z: 30 }, 1000)
                    .easing(Easing.Cubic.InOut)
                    .start();
                new Tween(model.rotation)
                    .to({ y: 2 }, 1000)
                    .easing(Easing.Cubic.InOut)
                    .start();
                spinModel = false;
                currentStep = 3;
                glider.destroy();

            }
            if (scrollY > steps[1] && scrollY <= steps[2] && currentStep !== 2) {

                hideAllGroups(560);

                new Tween(camera.position)
                    .to({ x: 0, y: 10, z: 30 }, 1000)
                    .easing(Easing.Cubic.InOut)
                    .start().onComplete(() => {
                        new Tween(camera.position)
                            .to(base, 10000)
                            .easing(Easing.Cubic.InOut)
                            .start()
                    });


                toggleExplode(true);
                // new Tween(camera.position)
                //     .to(base, 1000)
                //     .easing(Easing.Cubic.InOut)
                //     .start();
                resetSpin();
                spinModel = false;
                glider.mount();

                currentStep = 2;

            }
            // scrollY <= step1 && currentStep !== 1
            if (scrollY <= steps[1] && currentStep !== 1) {
                showAllGroups();

                toggleExplode(true);
                new Tween(camera.position)
                    .to(base, 1000)
                    .easing(Easing.Cubic.InOut)
                    .start();
                
                resetSpin();

                spinModel = false;
                currentStep = 1;
                glider.destroy();

            }

            previousScrollY = scrollY;
        });

        // Animation loop
        function animate() {
            requestAnimationFrame(animate);

            // Rotate the model if it has been loaded
            if (model && spinModel) {
                model.rotation.y += 0.005; // Adjust rotation speed as needed
            }
     
            update(); // Update tweens
            renderer.render(scene, camera);
        }

        animate();

        // Handle window resize
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

    document.addEventListener("DOMContentLoaded", () => {

        new Tween(camera.position)
            .to({  x: 0, y: 8, z: 0 }, 25)
            .easing(Easing.Cubic.InOut)
            .start();


        setTimeout(() => {
            new Tween(camera.position)
                .to(base, 2200)
                .easing(Easing.Cubic.InOut)
                .start();
            }, 50); 

        const float = document.getElementById("float");
        const fall = document.getElementById("fall");

        setTimeout(() => {
            float.classList.add("floating-text");
            fall.classList.add("droping-text");
            }, 2500);

        const sections = document.querySelectorAll(".section");
        let currentIndex = 0;
        let isScrolling = false;

        const debounce = (func, wait) => {
            let timeout;
            return function (...args) {
                clearTimeout(timeout);
                timeout = setTimeout(() => func.apply(this, args), wait);
            };
        };

        const scrollHandler = (e) => {
            if (isScrolling) return;

            isScrolling = true;

            if (e.deltaY > 0) {
                // Scroll Down
                if (currentIndex < sections.length - 1) {
                    currentIndex++;
                }
            } else {
                // Scroll Up
                if (currentIndex > 0) {
                    currentIndex--;
                }
            }

            sections[currentIndex].scrollIntoView({
                behavior: "smooth"
            });

            setTimeout(() => {
                isScrolling = false;
            }, 1000); // Adjust delay as needed
        };

        window.addEventListener("wheel", debounce(scrollHandler, 100));
    });



    document.getElementById("landingCTA").addEventListener("click", () => {
        // const sections = document.querySelectorAll(".section");
        // sections[1].scrollIntoView({
        //     behavior: "smooth"
        // });

        showOnlyRoofs()


        //show only one panel
        // onlyShowOneGroup("IfcElementAssemblyR4")

        // appartition a la suite des tous les panneaux
        // popUpPannels().then(() => {
        //     showAllGroups()
        // });


    });

    async function showOnlyRoofs() {
        for (const group in groups) {
            if (groups.hasOwnProperty(group)) {
                if(!group.includes("W")){
                    await new Promise(resolve => setTimeout(resolve, 300));
                    showGroup(groups[group])
                }
            }
        }

    }

    async function showOnlywalls() {
        for (const group in groups) {
            if (groups.hasOwnProperty(group)) {
                if(group.includes("W")){
                    showGroup(groups[group])
                    await new Promise(resolve => setTimeout(resolve, 300));

                }
            }
        }

    }

    async function popUpPannels() {
        for (const group in groups) {
            await new Promise(resolve => setTimeout(resolve, 250));
            if (groups.hasOwnProperty(group)) {
                // console.log(`Group: ${group}`);
                if(groups[group]){
                    showGroup(groups[group])
                }
            }
        }
        await new Promise(resolve => setTimeout(resolve, 1050));
    
    }

    function onlyShowOneGroup(group) {
        hideAllGroups()
        showGroup(groups[group])
    }

    function showAllGroups(){
        model.traverse((child) => {
            if (child.isMesh) {
                new Tween(child.material)
                    .to({ opacity: 1 }, 300)
                    .easing(Easing.Cubic.InOut)
                    .onUpdate(() => {
                        child.visible = child.material.opacity > 0;
                    })
                    .start();
            }
        });
    }

    function hideAllGroups(animationDelay=100){

        model.traverse((child) => {
            if (child.isMesh) {

                new Tween(child.material)
                    .to({ opacity: 0.00 }, animationDelay)
                    .easing(Easing.Cubic.InOut)
                    .onUpdate(() => {
                        child.visible = child.material.opacity > 0;
                    })
                    .start();
            }
        });
    }

    function containsNumber(s, numbers) {
        return numbers.some(number => s.includes(number));
    }

    // Function to smoothly hide all groups except the specified one
    function showGroup(toShow) {
        // console.log("toShow : ", toShow)
        if (!model) return;
        model.traverse((child) => {
        if (child.isMesh) {

            if ( containsNumber(child.name, toShow) ) {
                new Tween(child.material)
                    .to({ opacity: 1 }, 300)
                    .easing(Easing.Cubic.InOut)
                    .onUpdate(() => {
                        child.visible = child.material.opacity > 0;
                    })
                    .start();

            }
        }
    });
      
    }


    // GET CLICKED PIECE NAME
    // Raycaster and mouse vector for detecting clicks
    const raycaster = new THREE.Raycaster();
    const mouse = new THREE.Vector2();

    // Add event listener for mousedown
    window.addEventListener('mousedown', onMouseDown, false);

    function onMouseDown(event) {
        // Calculate mouse position in normalized device coordinates (-1 to +1) for both components
        mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
        mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;

        // Update the raycaster with the camera and mouse position
        raycaster.setFromCamera(mouse, camera);

        // Calculate objects intersecting the raycaster
        const intersects = raycaster.intersectObjects(scene.children, true);

        if (intersects.length > 0) {
            console.log('Clicked piece name:', intersects[0].object.name);
        }
    }




// Select the element to observe
class ClassWatcher {

constructor(targetNode, classToWatch, classAddedCallback, classRemovedCallback) {
    this.targetNode = targetNode
    this.classToWatch = classToWatch
    this.classAddedCallback = classAddedCallback
    this.classRemovedCallback = classRemovedCallback
    this.observer = null
    this.lastClassState = targetNode.classList.contains(this.classToWatch)

    this.init()
}

init() {
    this.observer = new MutationObserver(this.mutationCallback)
    this.observe()
}

observe() {
    this.observer.observe(this.targetNode, { attributes: true })
}

disconnect() {
    this.observer.disconnect()
}

mutationCallback = mutationsList => {
    for(let mutation of mutationsList) {
        if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
            let currentClassState = mutation.target.classList.contains(this.classToWatch)
            if(this.lastClassState !== currentClassState) {
                this.lastClassState = currentClassState
                if(currentClassState) {
                    this.classAddedCallback()
                }
                else {
                    this.classRemovedCallback()
                }
            }
        }
    }
}
}

let el1 = document.getElementById('All')
let el2 = document.getElementById('Walls')
let el3 = document.getElementById('Roofs')
// console.log(el1, el2, el3)

function allAndSpin(){
    showAllGroups()
    spinModel = true;
}

new ClassWatcher(el1, 'glide__bullet--active', allAndSpin, console.log)
new ClassWatcher(el2, 'glide__bullet--active', showOnlywalls, console.log)
new ClassWatcher(el3, 'glide__bullet--active', showOnlyRoofs, console.log)






    </script>
</body>


<style>

    body {
    margin: 0;
    color: #ffffff;
    display: flex;
    flex-direction: column;
    align-items: center;
    overflow: hidden;
    font-family: system-ui;

    background: rgb(23,31,56);
    background: -moz-linear-gradient(0deg, rgba(23,31,56,1) 0%, rgba(23,31,56,0.9906671348314607) 10%, rgba(23,31,56,0.9756109550561798) 20%, rgba(23,31,56,0.9541502808988764) 30%, rgba(23,31,56,0.9956109550561798) 40%, rgba(23,31,56,0.9962851123595506) 50%, rgba(23,31,56,0.9906671348314607) 60%, rgba(23,31,56,0.9756109550561798) 70%, rgba(23,31,56,0.9541502808988764) 80%, rgba(23,31,56,0.9962851123595506) 90%);
    background: -webkit-linear-gradient(0deg, rgba(23,31,56,1) 0%, rgba(23,31,56,0.9906671348314607) 10%, rgba(23,31,56,0.9756109550561798) 20%, rgba(23,31,56,0.9541502808988764) 30%, rgba(23,31,56,0.9956109550561798) 40%, rgba(23,31,56,0.9962851123595506) 50%, rgba(23,31,56,0.9906671348314607) 60%, rgba(23,31,56,0.9756109550561798) 70%, rgba(23,31,56,0.9541502808988764) 80%, rgba(23,31,56,0.9962851123595506) 90%);
    background: linear-gradient(0deg, rgba(23,31,56,1) 0%, rgba(23,31,56,0.9906671348314607) 10%, rgba(23,31,56,0.9756109550561798) 20%, rgba(23,31,56,0.9541502808988764) 30%, rgba(23,31,56,0.9956109550561798) 40%, rgba(23,31,56,0.9962851123595506) 50%, rgba(23,31,56,0.9906671348314607) 60%, rgba(23,31,56,0.9756109550561798) 70%, rgba(23,31,56,0.9541502808988764) 80%, rgba(23,31,56,0.9962851123595506) 90%);
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="#171f38",endColorstr="#171f38",GradientType=1);

}

h1 {
    font-size: 5rem !important;
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: 18px;
    max-width: 40vw;
}
p{
    margin: 0;
    max-width: 40vw;
}
canvas {
    position: fixed;
    top: 0;
    left:20vw;
}

.cta {
    border: solid 2.5px #48e59a;
    padding: 16px 26px 16px 26px;
    margin-top: 71px;
    cursor: pointer;
    box-sizing: border-box;
    width: fit-content;
    font-size: larger;
    font-weight: 700;
}

#controls {
    position: absolute;
    top: 10px;
    left: 10px;
    z-index: 100;
}

button {
    margin: 5px;
}

.section {
    height: 100vh;
    width: 100%;
    box-sizing: border-box;
    padding: 80px 40vw 80px 100px;
    display: flex;
    flex-direction: column;
}

.bgw {
}

.bgg {
}

.g{
    color: #48e59a;
}
/* glid 3 steps */
.glide {
  width: 500px;
  height: 250px;
}

.glide__slide img {
  width: 100%;
  height: 250px;
  /* Needs object-fit polyfill for IE */
  object-fit: cover;
}

.glide__bullets {
  display: flex;
  justify-content: center;
  margin-right: -10px;
  margin-left: -10px;
}

.glide__bullet {
  position: relative;
  display: flex;
  flex: 0 1 calc(100% / 3);
  max-width: calc(100% / 3);
  padding: 0;
  border: 0;
  overflow: hidden;
  color: #48e59a;
  height: 40px;
  margin-right: 10px;
  margin-left: 10px;
  background-color: transparent;
  box-shadow: inset 0px -4px 0px 0px lightgrey;
}

.glide__bullet:before {
  content: "";
  position: absolute;
  bottom: 0;
  width: 100%;
  height: 4px;
  display: block;
  opacity: 0;
  transform: translateX(-100%);
  background-color: #000;
  transition: transform 5s;
}

.glide__bullet--active:before {
  opacity: 1;
  transform: translateX(0);
}




</style>
</html>
